"use strict";(self.webpackChunktime_manager_app=self.webpackChunktime_manager_app||[]).push([["src_app_components_dashboard_components_prayer_prayer_module_ts"],{8386:(l,h,t)=>{t.r(h),t.d(h,{PrayerModule:()=>m});var i=t(3786),c=t(4106),p=t(4364);var u=t(4472),f=t(3882);let o=class{constructor(s){this.http=s}getPrayer(s){return this.http.get("https://api.pray.zone/v2/times/today.json?city="+s)}};o.ctorParameters=()=>[{type:f.eN}],o=(0,i.gn)([(0,c.GSi)({providedIn:"root"})],o);var v=t(2281),b=t.n(v);let e=class{constructor(s){this.prayerService=s,this.todayPrayers=[],this.pastTimes=[],this.now=(new Date).getTime()}ngOnInit(){let s,r;localStorage.getItem("todayPrayers")&&(this.todayPrayers=JSON.parse(localStorage.getItem("todayPrayers"))),this.prayerService.getPrayer("cairo").subscribe(d=>{let n=d.results.datetime[0].times;for(const a in n){let I=b()(n[a],"HH:mm").format(),x=new Date(I).getTime();if("Fajr"===a||"Dhuhr"===a||"Asr"===a||"Maghrib"===a||"Isha"===a){switch(a){case"Fajr":s="bg-fajr",r="fajr-sun";break;case"Dhuhr":s="bg-dhuhr",r="dhuhr-sun";break;case"Asr":s="bg-asr",r="asr-sun";break;case"Maghrib":s="bg-maghrib",r="maghrib-moon";break;case"Isha":s="bg-isha",r="isha-moon"}5!==this.todayPrayers.length&&this.todayPrayers.push({name:a,timeNumber:x,timeString:n[a],status:"",background:s,icon:r})}}this.prayerStatus(this.todayPrayers)})}onChangePrayerStatus(s){localStorage.removeItem("todayPrayers");for(let r=0;r<this.todayPrayers.length;r++)if(this.todayPrayers[r].name===s.name)switch(s.status){case"done":this.todayPrayers[r].status="missed";break;case"time":case"missed":this.todayPrayers[r].status="done"}localStorage.setItem("todayPrayers",JSON.stringify(this.todayPrayers))}prayerStatus(s){localStorage.removeItem("todayPrayers");for(let r=0;r<this.todayPrayers.length;r++)this.todayPrayers[r].timeNumber<this.now&&(this.pastTimes.push(this.todayPrayers[r].timeNumber),this.pastTimes.sort((d,n)=>n-d));for(let r=0;r<s.length;r++)s[r].timeNumber<this.now&&s[r].timeNumber!==this.pastTimes[0]&&"done"!==s[r].status?s[r].status="missed":s[r].timeNumber===this.pastTimes[0]&&"done"!==s[r].status?s[r].status="time":s[r].timeNumber>this.now&&(s[r].status="");localStorage.setItem("todayPrayers",JSON.stringify(this.todayPrayers))}};e.ctorParameters=()=>[{type:o}],e=(0,i.gn)([(0,c.wA2)({selector:"app-prayer",template:'<div class="bg-light p-3 my-5 w-100">\r\n  <img src="../../../../../assets/icons/prayer.svg" width="20" height="20" />\r\n  <span class="ms-2 text-primary">Prayer</span>\r\n</div>\r\n<div class="row justify-content-center w-100" *ngIf="todayPrayers">\r\n  <div class="col mx-2 rounded-pill-top px-2 text-center"\r\n        *ngFor="let prayer of todayPrayers"\r\n        [ngClass]="prayer.background">\r\n    <div class="py-5">\r\n      <div style="height:100px;width:100px" class="mx-auto">\r\n        <span *ngIf="prayer.status === \'time\' || prayer.status === \'done\'">\r\n          <img src="{{\'../../../../../assets/icons/\'+ prayer.icon +\'.svg\'}}" width="100" height="100" />\r\n        </span>\r\n      </div>\r\n      <h4 class="mt-5">{{ prayer.name }}</h4>\r\n      <div class="pt-3">{{ prayer.timeString }}</div>\r\n      <div class="pt-3 mx-auto" style="height:32px;width:100px;">\r\n        <div *ngIf="prayer.status === \'done\'">\r\n          <span class="alert-success rounded-pill py-1 px-2 clickable" (click)="onChangePrayerStatus(prayer)">\r\n            <img src="../../../../../assets/icons/done.svg" width="20" height="20" />\r\n            <span class="ms-2">Done</span>\r\n          </span>\r\n        </div>\r\n        <div *ngIf="prayer.status === \'time\'">\r\n          <span class="alert-primary rounded-pill py-1 px-2 clickable" (click)="onChangePrayerStatus(prayer)">\r\n            <img src="../../../../../assets/icons/time.svg" width="20" height="20" />\r\n            <span class="ms-2">Time</span>\r\n          </span>\r\n        </div>\r\n        <div *ngIf="prayer.status === \'missed\'">\r\n          <span class="alert-danger rounded-pill py-1 px-2 clickable" (click)="onChangePrayerStatus(prayer)">\r\n            <img src="../../../../../assets/icons/miss.svg" width="20" height="20" />\r\n            <span class="ms-2">Miss</span>\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n',styles:[u]})],e);var P=t(3568),S=t(335);const k=[{path:"prayer",component:e,pathMatch:"prefix"}];let m=class{};m=(0,i.gn)([(0,c.LVF)({declarations:[e],imports:[p.ez,P.Bz.forChild(k),S.u5]})],m)},4472:l=>{l.exports=".rounded-pill-top {\n  border-top-left-radius: 6rem !important;\n  border-top-right-radius: 6rem !important;\n}\n\n.bg-fajr {\n  background-color: #efc02f44;\n  color: #333333;\n}\n\n.bg-dhuhr {\n  background-color: #efc02f88;\n  color: #333333;\n}\n\n.bg-asr {\n  background-color: #efc02f;\n  color: #f3f3f3;\n}\n\n.bg-maghrib {\n  background-color: #457afbcc;\n  color: #f3f3f3;\n}\n\n.bg-isha {\n  background-color: #1a237ecc;\n  color: #f3f3f3;\n}"}}]);
//# sourceMappingURL=src_app_components_dashboard_components_prayer_prayer_module_ts.830b3f34fbacf61c0a6c.js.map